<!doctype html>
<html lang="en">

{% include "includes/head.html" %}

<body>
  {% include "includes/top-nav.html" %}
  <div class="container-fluid">
    <div class="row {% if related | length == 0 %}align-items-center{% endif %}">
      {# ----- SIDEBAR ----- #}
      <div class="col-md-6 col-lg-4">
        {# ----- HEADER ----- #}
        <h1><code>{{keywords_str}}</code> - related libraries</h1>
        <ul class="mt-3 ps-3">
          <li class="mb-1"><strong>Matching names</strong>:
            {% set related_len = related | length %}
            {% if related_len > 99 %}
            more than
            {% endif %}
            {{pretty_num(v=related_len)}}
        </ul>

        {# ----- EXPLAINER ----- #}
        {% if related | length > 0 %}
        <p class="text-muted">You can make your developer search more precise by including full or partial library name in the search: </p>
        <ul class="text-muted">
          <li class="mb-1">fully-qualified names like <code>{{keywords_str}}.foo.bar</code> match developers using that exact library</li>
          <li class="mb-1">singe keywords like <code>{{keywords_str}}</code> match developers using <code>{{keywords_str}}.foo.bar</code> or <code>foo.{{keywords_str}}.bar</code>, but not <code>{{keywords_str}}-foo-bar</code></li>
          <li class="mb-1">related-library search on this page returns any names with <code>{{keywords_str}}</code> in it</li>
        </ul>
        {% elif keywords_str is matching ("[^[:alnum:]\.\-_]") %}
        <p class="text-muted">Library names can only contain letters, numbers and <code>.-_</code> symbols.</p>
        {% endif %}

        {# ----- SEARCH BOX ----- #}
        <div class="row g-3 align-items-center mb-4">
          <div class="col-12">
            <input class="form-control form-control-sm me-2" type="search" placeholder="Language + lib names or keywords" title="Find libraries containing your keyword" value="{{raw_search}}" id="kw" minlength="1" maxlength="100" onkeydown="if (event.keyCode===13) document.getElementById('btn_related').click()">
          </div>
          <div class="col text-end">
            <button class="btn btn-sm btn-outline-success my-2 my-sm-0" type="button" id="btn_related" autocomplete="off" onclick="const v=document.getElementById('kw'); if (v.validity.valid) window.location.href='/_related?'+encodeURIComponent(v.value)" title="Find libraries containing this keyword to use that library name for a more specific developer search">Find libraries</button>
            <button class="btn btn-sm btn-outline-success my-2 my-sm-0" type="button" id="btn" autocomplete="off" onclick="const v=document.getElementById('kw'); if (v.validity.valid) window.location.href='/?'+encodeURIComponent(v.value)" title="Find developers mentioning this keyword in their code">Find devs</button>
          </div>
        </div>
      </div>

      {% if related | length > 0 %}
      <div class="col-md-6 col-lg-8">
        {% set col = related | length / 2 | int() %}
        <div class="row">

          <div class="col-lg-6">
            <dl class="row mb-0">
              <dt class="col-10 text-truncate">
                <strong>Keyword</strong>
              </dt>
              <dd class="col-2 text-end">
                <strong>Devs</strong>
              </dd>
              {% for ref in related | slice(start=0, end=col+1) %}
              <dt class="col-10 text-truncate">
                <a href="/?{{ref.k | urlencode}}">{{ref.k}}</a>
              </dt>
              <dd class="col-2 text-end">
                <small>{{pretty_num(v=ref.c)}}</small>
              </dd>
              {% endfor %}
            </dl>
          </div>

          {% if related | length > 2 %}
          <div class="col-lg-6">
            <dl class="row mb-0">
              <dt class="col-10 text-truncate d-none d-lg-block">
                <strong>Keyword</strong>
              </dt>
              <dd class="col-2 text-end d-none d-lg-block">
                <strong>Devs</strong>
              </dd>
              {% for ref in related | slice(start=col+1) %}
              <dt class="col-10 text-truncate">
                <a href="/?{{ref.k | urlencode}}">{{ref.k}}</a>
              </dt>
              <dd class="col-2 text-end">
                <small>{{pretty_num(v=ref.c)}}</small>
              </dd>
              {% endfor %}
            </dl>
          </div>
          {% endif %}

        </div>
      </div>
      {% else %}
      <div class="col-md-1"></div>
      <div class="col-md-4">
        <h3 class="mt-5 ms-3">Couldn't find any languages, frameworks or libraries with <span class="font-monospace text-muted">{{keywords_str}}</span> in the name.</h3>
      </div>
      {% endif %}
    </div>

    {% include "includes/footer.html" %}

</body>

</html>